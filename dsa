package DrawingPanel;

import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Polygon;
import java.awt.RenderingHints;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class sex {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> {
            JFrame frame = new JFrame("Escena Geométrica con Graphics2D");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            
            frame.add(new DrawingPanel());
            
            frame.pack();
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);
        });
    }
}

class DrawingPanel extends JPanel {

    private static final int PREF_W = 800;
    private static final int PREF_H = 600;

    public DrawingPanel() {
        this.setBackground(java.awt.Color.WHITE);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(PREF_W, PREF_H);
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        
        Graphics2D g2d = (Graphics2D) g;

        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, 
                             RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setStroke(new BasicStroke(2)); 

        // El orden de dibujo es importante para la superposición de objetos.
        // Dibujamos de "atrás" hacia "adelante".
        
        // Dibujar la línea del suelo primero, para que quede debajo de todo
        drawGround(g2d);

        drawSun(g2d, 100, 100);
        
        // Dibuja los edificios de atrás hacia adelante para la superposición
        drawBuildings(g2d);

        drawTrees(g2d);

        drawPeople(g2d);

        drawTrain(g2d);
    }
     private void drawGround(Graphics2D g2d) {
        // Línea del suelo que atraviesa todo el panel (terminando al lado derecho)
        g2d.drawLine(0, 280, PREF_W, 280);
       }

 
    private void drawSun(Graphics2D g2d, int cx, int cy) {
        int sunRadius = 40;
        g2d.drawOval(cx - sunRadius, cy - sunRadius, sunRadius * 2, sunRadius * 2);

        // Los rayos están rotados, así que necesitamos guardar y restaurar la transformación.
        java.awt.geom.AffineTransform originalTransform = g2d.getTransform();

        // Triángulo base para el rayo superior
        Polygon ray = new Polygon();
        ray.addPoint(cx - 10, cy - sunRadius - 5);
        ray.addPoint(cx + 10, cy - sunRadius - 5);
        ray.addPoint(cx, cy - sunRadius - 25);

        for (int i = 0; i < 8; i++) {
            g2d.draw(ray);
            g2d.rotate(Math.toRadians(45), cx, cy);
        }
        
        g2d.setTransform(originalTransform); // Restaurar la transformación original
    }
  
private void drawBuildings(Graphics2D g2d) {
    // --- Edificio trasero ---
    int backX = 450;     
    int backY = 190;     
    int backW = 110;      
    int backH = 220;     
    g2d.drawRect(backX, backY, backW, backH);
    g2d.drawRect(backX + 10, backY + 15, 35, 35);
    g2d.drawRect(backX + 83, backY + 15, 15, 15);
    g2d.drawRect(backX + 83, backY + 45, 15, 15);
    Polygon roof3 = new Polygon(
        new int[]{backX - 10, backX + backW + 10, backX + backW / 2},
        new int[]{backY, backY, backY - 55},
        3
    );
    g2d.draw(roof3);

    // --- Edificio central ---
    g2d.drawRect(300, 250, 155, 155);
    g2d.drawRect(325, 265, 25, 25);
    g2d.drawRect(365, 265, 25, 25);
    g2d.drawRect(405, 265, 25, 25);
    g2d.drawRect(325, 350, 55, 55);
    g2d.drawRect(390, 210, 40, 40);
    g2d.drawOval(402, 217, 15, 15);

    // --- Casa frontal ---
    int frontX = 440;
    int frontY = 310;
    int frontW = 120;
    int frontH = 120;
    g2d.drawRect(frontX, frontY, frontW, frontH);

    // Puerta (más pequeña y 5 px más abajo)
    g2d.drawRect(frontX + 20, frontY + 70, 40, 50);

    // Ventana circular (ya movida 5 px a la izquierda)
    g2d.drawOval(frontX + 75, frontY + 20, 40, 40);

    // Techo ampliado
    Polygon roof2 = new Polygon(
        new int[]{frontX - 20, frontX + frontW + 20, frontX + frontW / 2 + 10},
        new int[]{frontY, frontY, frontY - 70},
        3
    );
    g2d.draw(roof2);
}

    private void drawTrees(Graphics2D g2d) {
        // --- Árbol 1 (Circular) ---
        // Ajustadas posiciones y tamaños
        g2d.drawOval(80, 350, 90, 90); // Parte superior del árbol (círculo)
        g2d.drawRect(110, 440, 30, 60); // Tronco

        // --- Árbol 2 (Cónico) ---
        // Ajustadas posiciones y tamaños
        Polygon cone = new Polygon(
            new int[]{190, 290, 240}, // X's de las esquinas del triángulo
            new int[]{440, 440, 350}, // Y's de las esquinas del triángulo (parte superior más alta)
            3
        );
        g2d.draw(cone);
        g2d.drawRect(225, 440, 30, 60); // Tronco
    }

    private void drawPeople(Graphics2D g2d) {
        int personYBase = 500; // Base de los pies en la línea del suelo
        int headSize = 25;
        int bodyHeight = 25;

        // --- Persona 1 ---
        // Ajustadas posiciones y tamaños
        g2d.drawOval(150, personYBase - headSize - bodyHeight, headSize, headSize); // Cabeza
        Polygon body1 = new Polygon(
             new int[]{150, 150 + headSize, 150 + headSize/2}, // X's de las esquinas del triángulo
             new int[]{personYBase - bodyHeight, personYBase - bodyHeight, personYBase}, // Y's
             3
        );
        g2d.draw(body1);
        
        // --- Persona 2 ---
        // Ajustadas posiciones y tamaños
        g2d.drawOval(190, personYBase - headSize - bodyHeight, headSize, headSize); // Cabeza
        Polygon body2 = new Polygon(
             new int[]{190, 190 + headSize, 190 + headSize/2}, // X's de las esquinas del triángulo
             new int[]{personYBase - bodyHeight, personYBase - bodyHeight, personYBase}, // Y's
             3
        );
        g2d.draw(body2);
    }
   

private void drawTrain(Graphics2D g2d) {
    int shift = 80; // desplazamiento horizontal del tren
    int yBase = 490;             // parte superior del rectángulo base
    int wheelSize = 20;
    int yWheels = yBase + 20;    // posición vertical de las ruedas

    // --- Locomotora ---
    int locoX = 290 + shift;
    int locoW = 70;
    int locoH = 30;
    g2d.drawRect(locoX, yBase, locoW, locoH); // Base locomotora
    g2d.drawRect(locoX + 40, yBase - 30, 30, 30); // Cabina
    g2d.drawRect(locoX + 20, yBase - 20, 10, 20); // Chimenea
    Polygon front = new Polygon(
        new int[]{locoX - 20, locoX, locoX}, 
        new int[]{yBase + locoH, yBase, yBase + locoH}, 
        3
    );
    g2d.draw(front);

    // --- Carita feliz en la cabina ---
    int faceX = locoX + 45;  // posición horizontal dentro de la cabina
    int faceY = yBase - 25;  // posición vertical
    int faceSize = 20;       // diámetro del círculo (cabeza)
    g2d.drawOval(faceX, faceY, faceSize, faceSize);

    // Ojos (pequeños óvalos)
    int eyeY = faceY + 6;
    g2d.fillOval(faceX + 5, eyeY, 3, 3);
    g2d.fillOval(faceX + 12, eyeY, 3, 3);

    // Sonrisa (pequeño arco)
    g2d.drawArc(faceX + 4, faceY + 8, 12, 8, 200, 140);

    // --- Ruedas de la locomotora ---
    g2d.drawOval(locoX + 10, yWheels, wheelSize, wheelSize);
    g2d.drawOval(locoX + 40, yWheels, wheelSize, wheelSize);

    // --- Vagones ---
    int firstWagonX = locoX + locoW + 10;
    int wagonW = 60;
    int wagonH = 30;
    int wagonGap = 10;
    int numWagons = 3;

    for (int i = 0; i < numWagons; i++) {
        int x = firstWagonX + i * (wagonW + wagonGap);

        // Rectángulo principal del vagón
        g2d.drawRect(x, yBase, wagonW, wagonH);

        // Línea vertical divisoria dentro del vagón (centrada)
        int lineX = x + wagonW / 2;
        g2d.drawLine(lineX, yBase, lineX, yBase + wagonH);

        // Dos ruedas (una a la izquierda y otra a la derecha)
        int leftWheelX = x + 6;
        int rightWheelX = x + wagonW - wheelSize - 6;
        g2d.drawOval(leftWheelX, yWheels, wheelSize, wheelSize);
        g2d.drawOval(rightWheelX, yWheels, wheelSize, wheelSize);

        // --- Tubitos de conexión ---
        int centerY = yBase + wagonH / 2;
        if (i == 0) {
            // Tubos entre locomotora y primer vagón
            int locoEndX = locoX + locoW;
            g2d.drawLine(locoEndX, centerY - 3, x, centerY - 3);
            g2d.drawLine(locoEndX, centerY + 3, x, centerY + 3);
        } else {
            // Tubos entre vagones
            int prevWagonEndX = x - wagonGap;
            g2d.drawLine(prevWagonEndX, centerY - 3, x, centerY - 3);
            g2d.drawLine(prevWagonEndX, centerY + 3, x, centerY + 3);
        }
    }
}
}


